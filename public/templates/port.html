
<?php
/**
 * Template Name: Labels
 * This template will take an SKU and produce a PDF of that product
 */
// Include the main TCPDF library (search for installation path).

defined( 'ABSPATH' ) || exit;


require_once __DIR__ . '/lib/vendor/autoload.php';

// reference the Dompdf namespace
use Dompdf\Dompdf;
use Dompdf\Options;

$pid = htmlspecialchars($_GET["pid"]);

$product = wc_get_product( $pid );

// Get meta information
$keyword_title = get_post_meta( $product->get_id(), 'keyword_title', true );
$keyword_title_size = get_post_meta( $product->get_id(), 'keyword_title_size', true );
$title = get_post_meta( $product->get_id(), 'label_title', true );
// $weight = $product->get_weight();
$units_in_pack = get_post_meta( $product->get_id(), 'units_in_pack', true );
$suggested_use = get_post_meta( $product->get_id(), 'suggested_use', true );
$use_by_date = get_post_meta( $product->get_id(), 'use_by_date', true );
$batch_number = get_post_meta( $product->get_id(), 'current_batch_number', true );
$supplement_type = get_post_meta( $product->get_id(), 'supplement_type', true );
$is_vegan = get_post_meta( $product->get_id(), 'is_vegan', true );
$is_vegetarian = get_post_meta( $product->get_id(), 'is_vegetarian', true );
$brand_colour = get_post_meta( $product->get_id(), 'brand_colour', true );
$rs_collection = strtolower(get_post_meta( $product->get_id(), 'rs_collection', true ));
$barcode = get_post_meta( $product->get_id(), 'barcode_ean', true );
$feature_image_code = get_post_meta( $product->get_id(), 'feature_image_code', true );
$nrv_list = get_post_meta( $product->get_id(), 'nrv', true );

// language specific 

$ingredients = get_post_meta( $product->get_id(), 'ingredients', true );
$ingredients_es = get_post_meta( $product->get_id(), 'ingredients_es', true );
$ingredients_fr = get_post_meta( $product->get_id(), 'ingredients_fr', true );
$ingredients_de = get_post_meta( $product->get_id(), 'ingredients_de', true );
$ingredients_it = get_post_meta( $product->get_id(), 'ingredients_it', true );

// prefix the ingredients?
if (strlen($ingredients_es) > 0 ) { $ingredients_es = '<br />(ES): ' . $ingredients_es; }
if (strlen($ingredients_fr) > 0 ) { $ingredients_fr = '<br />(FR): ' . $ingredients_fr; }
if (strlen($ingredients_de) > 0 ) { $ingredients_de = '<br />(DE): ' . $ingredients_de; }
if (strlen($ingredients_it) > 0 ) { $ingredients_it = '<br />(ES): ' . $ingredients_it; }

// if we have language specific ingredients override the ingredients list.
$ingredients_list = "(EN): " . $ingredients . $ingredients_es . $ingredients_fr . $ingredients_de . $ingredients_it;


$allergens_en = get_post_meta( $product->get_id(), 'ALLERGENS_EN', true );
$allergens_es = get_post_meta( $product->get_id(), 'ALLERGENS_ES', true );
$allergens_de = get_post_meta( $product->get_id(), 'ALLERGENS_DE', true );
$allergens_fr = get_post_meta( $product->get_id(), 'ALLERGENS_FR', true );
$allergens_it = get_post_meta( $product->get_id(), 'ALLERGENS_IT', true );

// do we have allergens?
$allergens_en = $allergens_en ?: 'None';
$allergens_es = $allergens_es ?: 'Ninguno';
$allergens_de = $allergens_de ?: 'Keiner';
$allergens_fr = $allergens_fr ?: 'Aucun';
$allergens_it = $allergens_it ?: 'Nessuno';


$allergens = "(EN): " . $allergens_en . " (ES):". $allergens_es . " (DE):". $allergens_de . " (FR):". $allergens_fr . " (IT):". $allergens_it . "";

$country_of_origin = get_post_meta( $product->get_id(), 'country_of_origin', true );
$country_of_origin = $country_of_origin ? '<div>Country of Origin: ' . $country_of_origin . '</div>': '';

// do we have an NRV?
function createNRVTable($nrv_string) {
    $nrv_table = ''; // Initialize $nrv_table as an empty string

    // Split the CSV string by commas
    $items = explode(', ', $nrv_string);
    
    $nrv_table .= '
        <hr  style="height:0; border:0;border-top:1px solid #000"/>
        <h2>Nutritional Reference Value / Información Nutricional / Nährwertangaben / Valeurs Nutritionnelles / Informazioni Nutrizionali</h2>';
    // Start creating the table
    $nrv_table .= '<table class="nrv_table">';
    foreach ($items as $item) {
        // Split each item by '–' (en dash)
        list($name, $value) = explode('–', $item);
        
        // Trim whitespace
        $name = trim($name);
        $value = trim($value);
        
        // Append each item as a table row to $nrv
        $nrv_table .= '<tr>';
        $nrv_table .= '<td>' . $name . '</td>';
        $nrv_table .= '<td>' . $value . '</td>';
        $nrv_table .= '</tr>';
    }
    $nrv_table .= '</table>';

    return $nrv_table; // Return the table HTML as a string
}

if (strlen($nrv_list) > 0 ) {
  $nrv = createNRVTable($nrv_list);
} else {
  $nrv = '';
}


// bar code
$barcode = $barcode ?: '0000000000000';
$generator = new Picqer\Barcode\BarcodeGeneratorHTML();
$barcode_image = $generator->getBarcode($barcode, $generator::TYPE_CODE_128, 1, 50);


// if the feature image code is not set, set a default
$feature_image_code = $feature_image_code ?: 0;
 
 
$sku = $product->get_sku();
// tidy the SKU
$sku = preg_replace('/\s+/', '', $sku);

$sku_parts = explode("_", $sku);
$template =  strtolower($sku_parts[0]);
// if the brand colour is not set, set a default
$brand_colour = $brand_colour ?: '#49b9a9';


// split the units in pack
$units_parts = explode(" ", $units_in_pack);
// if its tablets, add a line break
if (strtolower($units_parts[1]) == 'tablets' || strtolower($units_parts[1]) == 'capsules') {
    $units_parts[1] = '<br />' . $units_parts[1];
} else {
//if its grammes, add an e
    $units_parts[1] =  $units_parts[1] . '&#8494;';
}


// ================ IMAGES

// 

# $inline_motif = '<svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 167.63 124.18"><path d="m21.14,0h126.09c11.26,0,20.4,9.13,20.4,20.4v82.65c0,16.77-18.61,26.84-32.65,17.67L9.6,38.77C-7.97,27.29.16,0,21.14,0Z" fill="' . $brand_colour .  '"/></svg>';
$inline_motif = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
<g>
  <circle cx="70" cy="35" r="28" fill="' . $brand_colour .  '" />
</g>
</svg>';


$inline_rs_maintenance = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><g><circle cx="10" cy="10" r="7.15" fill="#19a2cc" /></g></svg>';

$inline_rs_recovery = '<svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><g><path d="M17.25,4.5v11.19c0,.86-.7,1.56-1.56,1.56H4.5c-1.55,0-2.33-1.88-1.23-2.98L14.27,3.26c1.1-1.1,2.98-.32,2.98,1.23Z" fill="#ffd900" /></g></svg>';

$inline_rs_performance = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><g><path d="M2.75,15.5V4.31c0-.86.7-1.56,1.56-1.56h11.19c1.55,0,2.33,1.88,1.23,2.98l-11.01,11.01c-1.1,1.1-2.98.32-2.98-1.23Z" fill="#e20613" /></g></svg>';

$inline_rs_blank = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"></svg>';


/*
  .recovery {
    color: #FFD900;
  }
  .maintenance {
    color: #19A2CC;
  }
  .performance {
    color: #E20613;
  }
*/

 $rs_collection_logo = 'rs_collection_logo';

if ($template == 'rs') {

  switch ($rs_collection) {
      case "performance":
          $brand_colour = '#E20613';
          $rs_collection_logo = $inline_rs_performance;
          break;
      case "maintenance":
          $brand_colour = '#19A2CC';
          $rs_collection_logo = $inline_rs_maintenance;
          break;
      case "recovery":
          $brand_colour = '#FFD900';
          $rs_collection_logo = $inline_rs_recovery;
          break;
      default :
          $rs_collection_logo = $inline_rs_blank;
          
  }
}

// load RS SVG
$rs_logo_black = file_get_contents(__DIR__ . '/assets/images/rs/rs-logo-black.svg');
$rs_motif = file_get_contents(__DIR__ . '/assets/images/rs/rs-motif.svg');
$rs_header_motif = file_get_contents(__DIR__ . '/assets/images/rs/rs-header-motif.svg');

// load SVG
$vegetarian_logo = file_get_contents(__DIR__ . '/assets/images/fh/vegetarian-logo.svg');
$vegan_logo = file_get_contents(__DIR__ . '/assets/images/fh/vegan-logo.svg');
$fh_logo_black = file_get_contents(__DIR__ . '/assets/images/fh/fh-logo-black.svg');
$fh_logo_white = file_get_contents(__DIR__ . '/assets/images/fh/fh-logo-white.svg');
$fh_hole_punch = file_get_contents(__DIR__ . '/assets/images/fh/hole-punch.svg');
$recycled_logo_black = file_get_contents(__DIR__ . '/assets/images/fh/recycled-logo-black.svg');
$circle = file_get_contents(__DIR__ . '/assets/images/fh/fh-circle.svg');
$fitnesshealth_logo_square = file_get_contents(__DIR__ . '/assets/images/fh/fitnesshealth-logo.svg');
$feature_images = array();

array_push( $feature_images, file_get_contents(__DIR__ . '/assets/images/fh/blank.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-01.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-02.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-03.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-04.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-05.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-06.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-07.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-08.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-09.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-10.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-11.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-12.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-13.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-14.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-15.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-16.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-17.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-18.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-19.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-20.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-21.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-22.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-23.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-24.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-25.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-26.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-27.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-28.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-29.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-30.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-31.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-32.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-33.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-34.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-35.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-36.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-37.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-38.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-39.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-40.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-41.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-42.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-43.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-44.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-45.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-46.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-47.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-48.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-49.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-50.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-51.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-52.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-53.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-54.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-55.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-56.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-57.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-58.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-59.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-60.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-61.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-62.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-63.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-64.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-65.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-66.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-67.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-68.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-69.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-70.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-71.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-72.svg'),
  file_get_contents(__DIR__ . '/assets/images/fh/feature-art-73.svg')
);



// default GMO free of no vegan or vegetarian is loaded
function set_v_symbol($vegan, $vegetarian) {
  $v_symbol_ref = file_get_contents(__DIR__ . '/assets/images/fh/recycled-logo-black.svg');
  if ( strlen($vegan) > 0 ) { $v_symbol_ref =  file_get_contents(__DIR__ . '/assets/images/fh/vegan-logo.svg'); }
  if ( strlen($vegetarian) > 0 ) { $v_symbol_ref =  file_get_contents(__DIR__ . '/assets/images/fh/vegetarian-logo.svg'); }
  return $v_symbol_ref;
}
$v_symbol = set_v_symbol($is_vegan, $is_vegetarian);


// are we showing the front or the back?
$side = isset($_GET['side']) ? $_GET['side']:'front';

// the front side
$front_side = '
<div class="front">
  <img class="motif" src="data:image/svg+xml;base64,'.base64_encode($inline_motif).'" width="190" />
  <img class="fitnesshealth-small-logo" src="data:image/svg+xml;base64,'.base64_encode($fh_logo_white).'"  width="85" height="85" />
  <img class="hole-punch" src="data:image/svg+xml;base64,'.base64_encode($fh_hole_punch).'"  width="32" height="32" />
  <div class="header">
  </div>
  <div class="logos">
    <img src="data:image/svg+xml;base64,'.base64_encode($v_symbol).'"  width="32" height="32" />
    <img class="middle" src="data:image/svg+xml;base64,'.base64_encode($fh_logo_black).'"  width="32" height="32" />
    <img src="data:image/svg+xml;base64,'.base64_encode($recycled_logo_black).'"  width="32" height="32" />
  </div>
  <div class="circle">
    <img class="fh-circle" src="data:image/svg+xml;base64,'.base64_encode($circle).'"  width="340"/>
  </div>
  <div class="feature_image">
    <img src="data:image/svg+xml;base64,'.base64_encode($feature_images[(int)$feature_image_code]).'"  width="300" height="300" />
  </div>
  <div class="title_header">
    Food Supplement
  </div>
  <div class="keyword_title">' . $keyword_title . '</div>
  <div class="title">
  ' . $title .  '
  </div>
  <div class="fitnesshealth_logo">
    <img src="data:image/svg+xml;base64,'.base64_encode($fitnesshealth_logo_square).'"  width="380" style="margin-top:-1px;margin-left:-1px;" />
  </div>
  <div class="units_in_pack">
  ' . $units_in_pack . '
  </div>
  <div class="footer_text">
  Subscribe to fitnesshealth <br />
  <span>fitnesshealth.co</span>
  </div>
 </div>
';

// RS Template

// the front side
$rs_front_side = '
<div class="front">
  <div class="plus plus1">+</div>
  <div class="plus plus2">+</div>
  <div class="tear_strip">
        <img src="data:image/svg+xml;base64,'.base64_encode($rs_motif).'"  width="35" height="35" />
  </div>
  <div class="tear_strip_text">
    +++++++++++++------_____
  </div>
  <div class="header">
    <img src="data:image/svg+xml;base64,'.base64_encode($rs_header_motif).'"  width="250" height="250" />
  </div>
  <div class="logos">
    <img src="data:image/svg+xml;base64,'.base64_encode($v_symbol).'"  width="30" height="30" />
    <img src="data:image/svg+xml;base64,'.base64_encode($fh_logo_black).'"  width="30" height="30" />
    <!--<img src="data:image/svg+xml;base64,'.base64_encode($recycled_logo_black).'"  width="30" height="30" />-->
  </div>
  <div class="title_header">
    Pack Contents
  </div>
  <div class="title">
  ' . $title . '
  </div>
  <div class="rs_logo">
    <img src="data:image/svg+xml;base64,'.base64_encode($rs_logo_black).'"  width="200" height="100" />
  </div>
  <div class="units_in_pack">
  ' . $units_parts[0] . '<span>' . $units_parts[1] . '</span>
  </div>
  <div class="rs_collection ' . $rs_collection . '">
    <img class="rs_collection_logo" src="data:image/svg+xml;base64,'.base64_encode($rs_collection_logo).'" width="20" height="20" />' . $rs_collection .  '</div>
  <div class="bottom_bar"></div>
  <div class="footer_text">
  <span>rapidstrength.co</span>
  Subscribe for discounts
  </div>
 </div>
';

// the back side
$back_side = '
  <div class="back">
    <div class="header_back">
    </div>
    <div class="ingredients">
      <h2>Ingredients / Ingredientes / Zutaten / Ingrédients / Ingredienti</h2>
      <div>
        ' . $ingredients_list . '
      </div>
      <div> 
        <hr  style="height:0; border:0;border-top:1px solid #000"/>
        <h2>Allergens / Alérgenos / Allergene / Allergènes / Allergeni</h2>
        <p>' . $allergens .  '</p> 
      </div>
      ' . $nrv . '
      <hr  style="height:0; border:0;border-top:0.5px solid #000"/>
      <p>' . $country_of_origin .  '</p>
    </div>
    <div class="left_panel">
    </div>
    <div class="right_panel">
    <h2>Please keep out of reach of children.</h2>
    <p>Our product is intended for use by adults aged 18 and above.</p>
    <h2>Directions for Use</h2>
    <p>' . $suggested_use . ' Please don\'t exceed the recommended daily dose. Do not use if the package is damaged or the seal is broken.</p>
    <h2>Warnings</h2>
    <p>It\'s always best to check with your healthcare practitioner before using this product if you\'re pregnant, breastfeeding, taking medication, or have a medical condition.</p>
    <h2>Disclaimer</h2>
    <p>We believe in being transparent with our customers, so we want to make it clear that this product is not intended to diagnose, treat, cure, or prevent any disease.</p>
    <h2>Distributed By</h2>
    <p>Fitness Health Ltd.<br />Gower Road<br />Swansea.<br />SA2 7DP.</p>
    <hr  style="height:0; border:0;border-top:1px solid #000; padding-bottom:0.7em"/>
    <h2>Made Jenny\'s Way</h2>
    <p>Fitness Health is a family-owned business rooted in the legacy of our remarkable mother, Jenny Harwood. Jenny was not only a qualified nurse, but also a dedicated member of the Red Cross, where she applied her skills to aid those in need. Her passion for nutrition and wellbeing was evident in her tireless efforts to support and uplift others.</p>
    <p> With a genuine heart and unwavering commitment, Jenny spent her life caring for people, offering invaluable advice and unwavering support. Her influence is woven into every product we create, as we strive to carry on her legacy of enhancing lives, just as Jenny did.</p>
    </div>
  <div class="fitnesshealth_logo fitnesshealth_logo_back">
    <img src="data:image/svg+xml;base64,'.base64_encode($fitnesshealth_logo_square).'"  width="120" style="margin-top:-1px;margin-left:-1px;" />
  </div>
    <div class="bottom_logo">
      <img src="data:image/svg+xml;base64,'.base64_encode($fh_logo_black).'"  width="45" height="45" />
    </div>
    <div class="bottom_panel">
      <div class="use_by_date">
        Best Before: ' . $use_by_date . '
      </div>
      <div class="sku">
      ' . $sku . '
      </div>
    </div>
    <div class="qr_code">
      <!--<img src="https://chart.googleapis.com/chart?chs=300x300&cht=qr&chl=http%3A%2F%2Ffitnesshealth.co" title="Link to Google.com" />-->
      <img src="https://quickchart.io/qr?text=https%3A%2F%2Ffitnesshealth.co&size=300" />
    </div>
      <div class="barcode">
        ' . $barcode_image . '
        <div>' . $barcode . '</div>
      </div>
    <div class="batch_number">
      BN: ' . $batch_number . '
    </div>

    <div class="reorder">Scan this QR code and reorder this pack here:</div>
    <div class="footer_text footer_text_back">
    Subscribe to fitnesshealth <br />
    <span>fitnesshealth.co</span>
    </div>
  </div>
';
// the back side
$rs_back_side = '
  <div class="back">
  <div class="plus plus3">+</div>
  <div class="plus plus4">+</div>
  <div class="tear_strip">
        <img src="data:image/svg+xml;base64,'.base64_encode($rs_motif).'"  width="35" height="35" />
  </div>
  <div class="tear_strip_text">
  </div>

    <div class="ingredients">
      <h2>Ingredients</h2>
      <div>
        ' . $ingredients_list . '
      </div>
    </div>
    <div class="left_panel">

    </div>
    <div class="right_panel">
    <h2>Directions for Use</h2>
    <p>' . $suggested_use . ' Please don\'t exceed the recommended daily dose. Do not use if the package is damaged or the seal is broken.</p>
    <h2>Warnings</h2>
    <p>Our product is intended for use by adults aged 18 and above. Please keep out of reach of children.</p>
    <p>It\'s always best to check with your healthcare practitioner before using this product if you\'re pregnant, breastfeeding, taking medication, or have a medical condition.</p>
    <h2>Disclaimer</h2>
    <p>We believe in being transparent with our customers, so we want to make it clear that this product is not intended to diagnose, treat, cure, or prevent any disease.</p>
    <p>Fitness Health Ltd.<br />Gower Road<br />Swansea.<br />SA4 4RF</p>
    </div>
    <div class="bottom_bar"></div>
    <div class="bottom_panel">
    <img style="float:right" src="data:image/svg+xml;base64,'.base64_encode($fh_logo_black).'"  width="50" height="50" />
      <div class="use_by_date">
        Best Before: ' . $use_by_date . '
      </div>
      <div class="sku">
      ' . $sku . '
      </div>
    </div>
      <div class="qr_code_text"><h2>Save on your next order!</h2>To get a discount on your next order, scan the QR code above with your mobile phone to order this item directly from our store.</div>
    <div class="qr_code">
      <img src="https://chart.googleapis.com/chart?chs=300x300&cht=qr&chl=http%3A%2F%2Frapidstrength.co" title="Link to Rapid Strength" />
    </div>
    <div class="batch_number">
      BN: ' . $batch_number . '
    </div>
    <div class="footer_text">
    <span>rapidstrength.co</span>
    Subscribe for discounts
    </div>
  </div>
';

// select a side to view
if( $side == 'front' ) {
  $selected_side = $front_side;
}
if( $side == 'back' ) {
  $selected_side = $back_side;
}
if ($template == 'rs') {
  // select a side to view
  if( $side == 'front' ) {
    $selected_side = $rs_front_side;
  }
  if( $side == 'back' ) {
    $selected_side = $rs_back_side;
  }

}



$html_s ='
<html>
<head>
<style type="text/css">
font-face {
  font-family: "alte haas grotesk";
  font-style: normal;
  font-weight: 400;
  src: local("alte haas grotesk"), url(/wp-content/themes/storefront/fonts/AlteHaasGroteskRegular.ttf) format("truetype");
}
@font-face {
  font-family: "new order semibold";
  font-style: normal;
  font-weight: 700;
  src: local("new order semibold"), url(/wp-content/themes/storefront/fonts/NewOrderSemiBold.ttf) format("truetype");
}
@font-face {
  font-family: "new order medium";
  font-style: normal;
  font-weight: 700;
  src: local("new order medium"), url(/wp-content/themes/storefront/fonts/NewOrderMedium.ttf) format("truetype");
}
@font-face {
  font-family: "neue haas grotesk display pro";
  font-style: normal;
  font-weight: 700;
  src: local("neue haas grotesk display pro"), url(/wp-content/themes/storefront/fonts/NeueHaasDisplay-Mediu.ttf) format("truetype");
}
@font-face {
  font-family: "neue haas grotesk display pro light";
  font-style: normal;
  font-weight: 300;
  src: local("neue haas grotesk display pro light"), url(/wp-content/themes/storefront/fonts/NeueHaasDisplay-Light.ttf) format("truetype");
}

@page { margin: 0; size:auto; size:portrait; size: 130mm 225mm;}
body { margin: 0; padding:0px}
  body {
    font-size:11.5px;
    padding:0;
    font-family: "new order medium";
    font-weight: 700;
    font-style:normal;
  }

  .front, .back {
    position:relative;
    height:99.6%;
    -webkit-transform-origin: 50% 50%;
    -moz-transform-origin: 50% 50%;
    -ms-transform-origin: 50% 50%;
    -webkit-transform: rotate(180deg); 
    -moz-transform: rotate(180deg); 
    -ms-transform: rotate(180deg);
  }
  .keyword_title {
    font-family: "new order semibold";
    text-transform: capitalize;
    font-style: normal;
    font-weight: 700;
    position:absolute;
    bottom:56mm;
    left:36mm;
    height:22mm;
    width:110mm;
    line-height:0.85;
    font-size:' . $keyword_title_size . 'pt;
    letter-spacing:-0.03em;
    -webkit-transform-origin: 0% 100%;
    -moz-transform-origin: 0% 100%;
    -ms-transform-origin: 0% 100%;
    -webkit-transform: rotate(-90deg);
    -moz-transform: rotate(-90deg);
    -ms-transform: rotate(-90deg);
  }

  .nrv_table {
    width:100%;
  }

  .nrv_table td {
    border-bottom:1px solid #000;  
  }

  .title {
    font-family: "new order semibold";
    text-transform: capitalize;
    font-style: normal;
    font-weight: 700;
    position:absolute;
    bottom:60mm;
    right:23mm;
    width:12em;
    line-height:0.85;
    font-size:14pt;
    letter-spacing:-0.03em; 
  }

  .title_header {
    text-transform: capitalize;
    font-family: "new order medium";
    font-weight: 700; 
    position:absolute;
    bottom:56mm;
    right:58mm;
  }

  .header {
    position:absolute;
    height:11.775mm;
    width: auto;
    top:8mm;
    left:7mm;
    right:7mm;
    border:1px dashed #000;
    border-radius:30px;
    font-size:0.6em;
    
  }
  .header div {
    margin:2mm 9mm;
    text-align:right;
  }
  .header_back {
    position:absolute;
    height:13.775mm;
    width: auto;
    top:4mm;
    left:7mm;
    right:7mm;
  }

  .motif {
    position:absolute;
    top:40mm;
    right:12mm;
    z-index:0;
  }

 .circle {
    position:absolute;
    top:85mm;
    left:10mm;
    z-index:-2;
    background:' . $brand_colour . ';
    overflow:hidden;
    width:86mm;
    height:86mm;
    
  }
  .circle img {
    margin:-5px -5px -5px -5px;
  }

  .fitnesshealth-small-logo {
    position:absolute;
    top:46.4mm;
    right:16mm;
    z-index:1;
  }
  .hole-punch {
    position:absolute;
    top:10mm;
    left:9.5mm;
    z-index:1;
  }


  .ingredients {
    border:1px solid #1d1d1d;
    font-size:0.68em;
    margin:0 20px 1em;
    width:55mm;
    border-radius:3mm;
    position:absolute;
    top:42mm;
    left:2mm;
    padding:3mm 2mm 4mm;
  }
  .ingredients div {
    text-transform:capitalize;
    font-size:0.9em;
    line-height:0.8;
    margin-top:0.3em;
  }

  .contains {
    
  }

  .left_panel, .right_panel {
    width:45mm;
    font-size:0.65em;
    line-height:0.8;
  }
  .left_panel h2, .right_panel h2, .ingredients h2 {
    font-family: "new order semibold";
    font-weight: 700;
    font-size:1em;
    line-height:0.7;
    padding:0;
    margin:0;
  }
  .left_panel p, .right_panel p {
    padding-top:0;
    margin-top:0.2em;
  } 

  .left_panel {
    position:absolute;
    top:32mm;
    left:8mm;
  }

  .right_panel {
    position:absolute;
    top:42mm;
    right:11mm;
  }
  
  .bottom_panel {
    position:absolute;
    bottom:42mm;
    right:11mm;
    left:11mm;
  }
  .bottom_logo {
    position:absolute;
    bottom:12mm;
    right:12mm;
  }

  .units_in_pack {
    position:absolute; 
    text-transform: capitalize;
    bottom:18mm; 
    right:10mm;
    letter-spacing:-0.03em;
    font-size:0.9em;
    border: 1px solid #1b1b1b;
    border-radius:5mm;
    padding:0 10px 4px 6px;
    text-align: right;
    width:28mm;
    font-family: "new order medium";
    font-weight: 700;
  }
  .batch_number {
    position:absolute; 
    bottom:7mm; 
    right:11mm; 
    font-size:1em;
    text-align:right;
  }
  .use_by_date, .sku {
    border-radius:4mm;
    border:1px solid #1b1b1b;
    padding: 1px 9px 3px;
    display: inline-block;
    font-size:0.8em;
  }
  .sku {
    right:0
  }
  .instructions {
    font-size:0.5em;
    position:absolute;
    text-transform:uppercase;
    bottom:70px;
    right:20px;
    width:50%;
    text-align:right;
  }  
  .v_symbol {
    position:absolute;
    right:20px;
    bottom:135px;
    width:40px;
  }
  .logos {
    border:0.75px solid #000;
    border-radius:100px;
    bottom:40px;
    left:30px;
    position:absolute;
    padding:4mm 3mm;
    height:5mm;
  }
  .logos img {
    display:block;
    margin-left:0mm;
    margin-right:0mm;
  }
  
  .logos img.middle {
    margin-left:5mm;
    margin-right:5mm;
  }

  .feature_image {
    position:absolute;
    bottom:85mm;
    right:35mm;
    height:61mm;
    width:61mm;
  }
  .fitnesshealth_logo {
    background-color: ' . $brand_colour .  ';
    position:absolute;
    top:52mm;
    right:0mm;
    width:77mm;
    height:77mm;
    overflow:hidden;
    z-index:-1;
    display:none;
  }

  .fitnesshealth_logo_back {
    right:7mm;
    bottom:50mm;
    display:none;
  }

  .qr_code {
    position:absolute;
    bottom:50mm;
    right:6mm;
    width:60mm;
    height:22mm;
    font-size:0.8em;
    line-height:0.8;
  }
  .qr_code img {
    width:22mm;
    float:right;
  }

  .barcode {
    position:absolute;
    bottom:6mm;
    left:11mm;
    width:51mm;  
  }
  .barcode img {
    width:50mm
  }
  .barcode div {
    letter-spacing:0.30em;
    text-align:left;
  }

  .reorder {
    display:none;
    position:absolute;
    bottom:8mm;
    right:25mm;
    width:30mm;
    font-size:0.75em;
  }


  .footer_text {
    line-height:0.9;
    font-size:0.8em;
    position:absolute;
    bottom:11mm;
    right:10mm;
    text-align:right;
  }
  .footer_text span {
    font-family: "new order semibold";
    font-weight: 700;
  }
  .footer_text_back {
    bottom:42mm;
    right:9mm;
  }

</style>
</head>
<body>
' . $selected_side . '
</body>
</html>
';

$html_sp ='
<html>
<head>
<style type="text/css">
font-face {
  font-family: "alte haas grotesk";
  font-style: normal;
  font-weight: 400;
  src: local("alte haas grotesk"), url(/wp-content/themes/storefront/fonts/AlteHaasGroteskRegular.ttf) format("truetype");
}
@font-face {
  font-family: "new order semibold";
  font-style: normal;
  font-weight: 700;
  src: local("new order semibold"), url(/wp-content/themes/storefront/fonts/NewOrderSemiBold.ttf) format("truetype");
}
@font-face {
  font-family: "new order medium";
  font-style: normal;
  font-weight: 700;
  src: local("new order medium"), url(/wp-content/themes/storefront/fonts/NewOrderMedium.ttf) format("truetype");
}
@font-face {
  font-family: "neue haas grotesk display pro";
  font-style: normal;
  font-weight: 700;
  src: local("neue haas grotesk display pro"), url(/wp-content/themes/storefront/fonts/NeueHaasDisplay-Mediu.ttf) format("truetype");
}
@font-face {
  font-family: "neue haas grotesk display pro light";
  font-style: normal;
  font-weight: 300;
  src: local("neue haas grotesk display pro light"), url(/wp-content/themes/storefront/fonts/NeueHaasDisplay-Light.ttf) format("truetype");
}

@page { margin: 0; size:auto; size:portrait; size: 130mm 225mm;}
body { margin: 0; padding:0px}
  body {
    font-size:11.5px;
    padding:0;
    font-family: "new order medium";
    font-weight: 700;
    font-style:normal;
  }

  .front, .back {
    position:relative;
    height:99.6%;
    -webkit-transform-origin: 50% 50%;
    -moz-transform-origin: 50% 50%;
    -ms-transform-origin: 50% 50%;
    -webkit-transform: rotate(180deg); 
    -moz-transform: rotate(180deg); 
    -ms-transform: rotate(180deg);
  }
  .keyword_title {
    font-family: "new order semibold";
    text-transform: capitalize;
    font-style: normal;
    font-weight: 700;
    position:absolute;
    bottom:46mm;
    left:33mm;
    height:22mm;
    width:180mm;
    line-height:0.85;
    font-size:' . $keyword_title_size . 'pt;
    letter-spacing:-0.03em;
    -webkit-transform-origin: 0% 100%;
    -moz-transform-origin: 0% 100%;
    -ms-transform-origin: 0% 100%;
    -webkit-transform: rotate(-90deg);
    -moz-transform: rotate(-90deg);
    -ms-transform: rotate(-90deg);
  }

  .title {
    font-family: "new order semibold";
    text-transform: capitalize;
    font-style: normal;
    font-weight: 700;
    position:absolute;
    bottom:50mm;
    right:7mm;
    width:13em;
    line-height:0.85;
    font-size:14pt;
    letter-spacing:-0.03em;
  }

  .title_header {
    text-transform: capitalize;
    font-family: "new order medium";
    font-weight: 700;
    position:absolute;
    bottom:44mm;
    right:46.5mm;
  }
  .header {
    position:absolute;
    height:11.775mm;
    width: auto;
    top:7mm;
    left:7mm;
    right:7mm;
    border:1px dashed #000;
    border-radius:30px;
    font-size:0.6em;
    
  }
  .header div {
    margin:2mm 9mm;
    text-align:right;
  }
  .header_back {
    position:absolute;
    height:13.775mm;
    width: auto;
    top:4mm;
    left:7mm;
    right:7mm;
  }

  .motif {
    position:absolute;
    top:44mm;
    right:7mm;
    z-index:0;
  }

 .circle {
    position:absolute;
    top:125mm;
    left:15mm;
    z-index:-2;
    background:' . $brand_colour . ';
    overflow:hidden;
    width:80mm;
    height:80mm;
    
  }
  .circle img {
    margin:-5px -5px -5px -5px;
  }

  .fitnesshealth-small-logo {
    position:absolute;
    top:47mm;
    right:11.5mm;
    z-index:1;
    width:95px !important;
    height:95px !important;
  }
  .hole-punch {
    position:absolute;
    top:9mm;
    left:9.5mm;
    z-index:1;
  }


  .ingredients {
    border:1px solid #1d1d1d;
    font-size:0.68em;
    margin:0 20px 1em;
    width:55mm;
    border-radius:3mm;
    position:absolute;
    top:42mm;
    left:2mm;
    padding:3mm 2mm 4mm;
  }
  .ingredients div {
    text-transform:capitalize;
    font-size:1em;
    line-height:0.8;
    margin-top:0.3em;
  }

  .contains {
    
  }

  .left_panel, .right_panel {
    width:45mm;
    font-size:0.65em;
    line-height:0.8;
  }
  .left_panel h2, .right_panel h2, .ingredients h2 {
    font-family: "new order semibold";
    font-weight: 700;
    font-size:1em;
    line-height:0.7;
    padding:0;
    margin:0;
  }
  .left_panel p, .right_panel p {
    padding-top:0;
    margin-top:0.2em;
  } 

  .left_panel {
    position:absolute;
    top:62mm;
    left:11mm;
  }

  .right_panel {
    position:absolute;
    top:75mm;
    right:11mm;
  }
  
  .bottom_panel {
    position:absolute;
    bottom:40mm;
    right:7mm;
    left:7mm;
  }
  .bottom_logo {
    position:absolute;
    bottom:12mm;
    right:30mm;
  }

  .units_in_pack {
    position:absolute; 
    text-transform: capitalize;
    bottom:18mm; 
    right:6mm;
    letter-spacing:-0.03em;
    font-size:0.9em;
    border: 1px solid #1b1b1b;
    border-radius:5mm;
    padding:0 10px 4px 6px;
    text-align: right;
    width:28mm;
    font-family: "new order medium";
    font-weight: 700;
  }
  .batch_number {
    position:absolute; 
    bottom:7mm; 
    right:30mm; 
    font-size:1em;
    text-align:right;
  }
  .use_by_date, .sku {
    border-radius:4mm;
    border:1px solid #1b1b1b;
    padding: 1px 9px 3px;
    display: inline-block;
    font-size:0.8em;
  }
  .sku {
    right:0
  }
  .instructions {
    font-size:0.5em;
    position:absolute;
    text-transform:uppercase;
    bottom:70px;
    right:20px;
    width:50%;
    text-align:right;
  }  
  .v_symbol {
    position:absolute;
    right:20px;
    bottom:135px;
    width:40px;
  }
  .logos {
    border:0.75px solid #000;
    border-radius:100px;
    bottom:40px;
    left:20px;
    position:absolute;
    padding:4mm 3mm;
    height:5mm;
  }
  .logos img {
    display:block;
    margin-left:0mm;
    margin-right:0mm;
  }
  
  .logos img.middle {
    margin-left:5mm;
    margin-right:5mm;
  }

  .feature_image {
    position:absolute;
    bottom:78mm;
    right:30mm;
    height:51mm;
    width:51mm;
  }
  .fitnesshealth_logo {
    background-color: ' . $brand_colour .  ';
    position:absolute;
    top:52mm;
    right:0mm;
    width:77mm;
    height:77mm;
    overflow:hidden;
    z-index:-1;
    display:none;
  }

  .fitnesshealth_logo_back {
    right:7mm;
    bottom:50mm;
    display:none;
  }

  .qr_code {
    position:absolute;
    bottom:5mm;
    right:3mm;
    width:60mm;
    height:22mm;
    font-size:0.8em;
    line-height:0.8;
  }
  .qr_code img {
    width:22mm;
    float:right;
  }

  .barcode {
    position:absolute;
    bottom:6mm;
    left:7.2mm;
    width:51mm;  
  }
  .barcode img {
    width:50mm
  }
  .barcode div {
    letter-spacing:0.30em;
    text-align:left;
  }

  .reorder {
    display:none;
    position:absolute;
    bottom:8mm;
    right:25mm;
    width:30mm;
    font-size:0.75em;
  }


  .footer_text {
    line-height:0.9;
    font-size:0.8em;
    position:absolute;
    bottom:10mm;
    right:8mm;
    text-align:right;
  }
  .footer_text span {
    font-family: "new order semibold";
    font-weight: 700;
  }
  .footer_text_back {
    bottom:28mm;
    right:7mm;
  }

</style>
</head>
<body>
' . $selected_side . '
</body>
</html>
';


$html_rs ='<html>
<head>
<style type="text/css">
@font-face {
  font-family: "alte haas grotesk";
  font-style: normal;
  font-weight: 400;
  src: local("alte haas grotesk"), url(/wp-content/themes/storefront/fonts/AlteHaasGroteskRegular.ttf) format("truetype");
}
@font-face {
  font-family: "neue haas grotesk display pro";
  font-style: normal;
  font-weight: 700;
  src: local("neue haas grotesk display pro"), url(/wp-content/themes/storefront/fonts/NeueHaasDisplay-Mediu.ttf) format("truetype");
}
@font-face {
  font-family: "neue haas grotesk display pro light";
  font-style: normal;
  font-weight: 300;
  src: local("neue haas grotesk display pro light"), url(/wp-content/themes/storefront/fonts/NeueHaasDisplay-Light.ttf) format("truetype");
}
@page { margin: 0; size:auto; size:portrait; size: 130mm 225mm;}
body { margin: 0; padding:0px}
  body {
    font-size:11.5px;
    padding:0;
    font-family: "alte haas grotesk";
    font-weight:400;
    font-style:normal;
  }

  .front, .back {
    position:relative;
    height:99.6%;
    -webkit-transform-origin: 50% 50%;
    -moz-transform-origin: 50% 50%;
    -ms-transform-origin: 50% 50%;
    -webkit-transform: rotate(180deg); 
    -moz-transform: rotate(180deg); 
    -ms-transform: rotate(180deg);
  }
  .title {
    font-family: "neue haas grotesk display pro";
    text-transform: capitalize;
    font-style: normal;
    font-weight: 700;
    position:absolute;
    bottom:30mm;
    left:15mm;
    width:14em;
    line-height:0.85;
    font-size:28pt;
    letter-spacing:-0.03em; 
    height:2em;
    -webkit-transform-origin: top left;
    -moz-transform-origin: top left;
    -ms-transform-origin: top left;
    -webkit-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
  }

  .title_header {
    text-transform: capitalize;
    -webkit-transform-origin: top left;
    -moz-transform-origin: top left;
    -ms-transform-origin: top left;
    -webkit-transform: rotate(270deg);
    -moz-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
    font-family: "neue haas grotesk display pro light";
    font-weight: 700; 
    position:absolute;
    bottom:45mm;
    left:9mm;
  }

  .tear_strip {
    position:absolute;
    top:9.5mm;
    right:6mm;
  }
  .tear_strip_text {
    position:absolute;
    top:10mm;
    left:7mm;
    right:7mm;
    font-size:1.3em;
    letter-spacing:0.1em;
    background-color:' . $brand_colour .  ';
    padding:0.5mm 3mm;
    z-index:-1;
    height:30px;
  }

  .header {
    color:#fff;
    position:absolute;
    width: 249px;
    height:249px;
    top:36mm;
    right:6mm;
    overflow:hidden;
    background-color:' . $brand_colour .  ';
  }

  .header_back {
    position:absolute;
    width: auto;
    top:10mm;
    left:7mm;
    right:7mm;
    height:7mm;
    background-color:' . $brand_colour .  ';
    text-align:right;
    padding-top:6px;
  }

  .rs_collection {
    font-family: "neue haas grotesk display pro";
    font-style: normal;
    font-weight: 700;
    text-transform: capitalize;
    position:absolute;
    bottom:49mm;
    left:66.8mm;
    height:7mm;
    font-size:2em;
    letter-spacing:-0.04em;
  }

  .rs_collection_logo {
    display:inline-block;
    vertical-align: text-top; 
    height:22px;
    width:22px;
    border:1.3px solid white;
    padding-top:1.3px;
    border-right:0;
    border-left:0;
    border-top:0;
    z-index:-1;
  }


  .recovery {
    color: #FFD900;
  }
  .maintenance {
    color: #19A2CC;
  }
  .performance {
    color: #E20613;
  }

  .ingredients {
    border:1px solid #1d1d1d;
    font-size:0.76em;
    margin:0 20px 1em;
    width:45mm;
    border-radius:3mm;
    position:absolute;
    top:50mm;
    left:2mm;
    right:2mm;
    padding:3mm 4mm 5mm;
  }
  .ingredients div {
    text-transform:capitalize;
    font-size:1em;
    line-height:0.8;
    margin-top:0.3em;
  }
  .left_panel, .right_panel {
    width:55mm;
    font-size:0.75em;
    line-height:0.8;
  }
  .left_panel h2, .right_panel h2, .ingredients h2 {
    font-family: "neue haas grotesk display pro";
    font-weight: 700;
    font-size:1em;
    line-height:0.7;
    padding:0;
    margin:0;
  }
  .left_panel p, .right_panel p {
    padding-top:0;
    margin-top:0.2em;
  } 

  .left_panel {
    position:absolute;
    top:52mm;
    left:8mm;
  }

  .right_panel {
    position:absolute;
    top:52mm;
    right:8mm;
  }
  
  .bottom_panel {
    position:absolute;
    bottom:25mm;
    right:8mm;
    left:18mm;
  }


  .units_in_pack {
    position:absolute; 
    text-transform: capitalize;
    bottom:24mm; 
    right:10mm;
    letter-spacing:-0.03em;
    padding:0;
    font-family: "neue haas grotesk display pro";
    font-weight: 700;
    font-size: 2.5em;
    line-height:0.6;
    text-align:right;
  }
  .units_in_pack span {
    letter-spacing:0;
    font-size:0.6em;
  }

  .batch_number {
    position:absolute; 
    bottom:13mm; 
    right:13mm; 
    font-size:0.7em;
  }
  .use_by_date, .sku {
    border-radius:4mm;
    border:1px solid #1b1b1b;
    padding: 1px 9px 3px;
    display: inline-block;
    font-size:0.8em;
  }
  .sku {
    right:0
  }
  .instructions {
    font-size:0.5em;
    position:absolute;
    text-transform:uppercase;
    bottom:70px;
    right:20px;
    width:50%;
    text-align:right;
  }  
  .v_symbol {
    position:absolute;
    right:20px;
    bottom:135px;
    width:40px;
  }
  .logos {
    text-align:right;
    position:absolute;
    bottom:9mm;
    right:10mm;
  }
  .logos img {
    margin-left:2mm
  }
  .feature_image {
    position:absolute;
    top:60mm;
    right:10mm;
    border:1px solid #1b1b1b;
    border-radius:50%;
    height:48mm;
    width:48mm
  }
  .rs_logo {
    position:absolute;
    bottom:50mm;
    right:10mm;
    width:200px;
    height:100px;
    overflow:hidden;
  }
  .qr_code {
    display:none;
    position:absolute;
    bottom:97mm;
    right:7mm;
    width:70mm;
    height:20mm;
    line-height:0.8;
    z-index:-1;
  }
  .qr_code img {
    width:40mm;
    float:right;
  }

  .qr_code_text {
    display:none;
    position:absolute;
    bottom:65mm;
    right:12.5mm;
    width:30mm;
    line-height:0.8;
    font-size:0.76em;
  }
  .qr_code_text h2 {
    font-family: "neue haas grotesk display pro";
    font-weight: 700;
    font-size:1.2em;
    margin-bottom:0.2em;
  }

  .bottom_bar {
    background-color: ' . $brand_colour .  ';
    height:10px;
    position:absolute;
    bottom:41mm;
    left:7mm;
    right:7mm;
    
  }

  .footer_text {
    z-index:-1;
    line-height:0.9;
    font-size:0.8em;
    position:absolute;
    bottom:12mm;
    left:7mm;
    right:7mm;
    padding:0.7mm 5mm;
  }
  .footer_text span {
    font-family: "neue haas grotesk display pro";
    font-weight: 700;
    font-size:1.4em;
  }

  .plus {
    font-size:4.5em;
    position:absolute;
    font-family: "neue haas grotesk display pro light";
    font-weight: 700;
  }

  .plus1 {
    top:28mm;
    left:7mm; 
  }
  .plus2 {
    bottom:20mm;
    left:7mm; 
  }
  .plus3 {
    top:28mm;
    left:7mm; 
  }
  .plus4 {
    bottom:20mm;
    left:7mm; 
  }
    

</style>
</head>
<body>
' . $selected_side . '
</body>
</html>
';


// instantiate and use the dompdf class
$options = new Options();
$options->set('isRemoteEnabled', true);

$dompdf = new Dompdf($options);
$dompdf->set_option('isFontSubsettingEnabled', true);
  if ($template == 'sp') {
    $dompdf->loadHtml($html_s);
    $customPaper = array(0,0,130,225);
  } elseif ($template == 'rs') {
    $dompdf->loadHtml($html_rs);
    $customPaper = array(0,0,130,225);
  } else {
    $dompdf->loadHtml($html_s);
    $customPaper = array(0,0,300,225);
  }
// (Optional) Setup the paper size and orientation
$dompdf->set_option('isHtml5ParserEnabled', true);

// Render the HTML as PDF
$dompdf->render();

// Output the generated PDF to Browser
//$dompdf->stream();
//$dompdf->stream('page.pdf');
$dompdf->stream($sku . "_" . strtoupper($side),array('Attachment'=>0));
$output = $dompdf->output();
file_put_contents('/home/fhinv/apps/inventory/wp-content/uploads/pouches/' . $sku . "_" . strtoupper($side) . ".pdf", $output);

exit();
